
```markdown
# BlockWorld - 無限ブロックアドベンチャー

BlockWorldは、Minecraftにインスパイアされたブラウザベースの3Dブロックゲームです。Three.jsを使用して構築され、無限に生成されるブロックワールドを探索し、ブロックを設置して冒険を楽しめます。教育目的や個人プロジェクトとして、WebGLとJavaScriptを学びながらゲーム開発を体験できます。

## 機能

- **ワールド生成**：Perlinノイズを使用したランダムな地形生成（草、土、石、木、水など）。
- **プレイヤー移動**：
  - WASDで移動（カメラの向きに沿った前後左右）。
  - スペースキーでジャンプ（1ブロック段差を登れる）。
  - Shiftキーでスニーク（速度低下、視点低下、エッジで落下防止）。
- **ブロック操作**：右クリックで土ブロックを設置。
- **チャンク管理**：プレイヤー中心に動的なチャンク生成/削除、読み込み通知表示。
- **メイン画面**：ゲーム開始/終了メニュー、Escキーで一時停止メニュー。
- **視覚効果**：影付きライティング、クロスヘア表示、視点移動（マウス、上下90度制限）。

## セットアップ

### GitHub Pagesでのデプロイ

1. **リポジトリの準備**：
   - このリポジトリをクローンまたはフォーク：
     ```bash
     git clone https://github.com/<ユーザー名>/blockworld.git
     ```
2. **ファイルの確認**：
   - `index.html`がルートにあることを確認（Three.jsはCDN経由で読み込み）。
3. **プッシュ**：
   ```bash
   git add index.html
   git commit -m "Update BlockWorld"
   git push origin main
   ```
4. **GitHub Pagesを有効化**：
   - GitHubリポジトリの「Settings」→「Pages」→「Branch」を`main`に設定。
   - 公開URL（例: `https://<ユーザー名>.github.io/blockworld/`）でアクセス。
5. **キャッシュの注意**：
   - 変更反映に数分かかる場合があります。ブラウザのキャッシュをクリア（Ctrl+Shift+R）。

### ローカルでの実行

1. **依存関係**：
   - 特別なサーバー不要。`index.html`をブラウザで直接開くか、ローカルサーバーを使用。
2. **ローカルサーバーの推奨**：
   ```bash
   python -m http.server 8000
   ```
   - ブラウザで`http://localhost:8000`にアクセス。
3. **ブラウザ要件**：
   - Chrome、Firefoxの最新版を推奨。
   - WebGLが有効であることを確認（`get.webgl.org`でテスト）。

## 操作方法

### メイン画面

- ゲーム開始時に「BlockWorld」タイトルと「開始」「終了」ボタンが表示。
- 「開始」をクリックしてゲーム開始、「終了」でページリロード。

### ゲームプレイ

- **左クリック**：ポインターロック（マウスで視点移動）。
- **WASD**：前進（W）、後退（S）、左（A）、右（D）。
- **スペース**：ジャンプ（1ブロック登る）。
- **Shift**：スニーク（遅く移動、エッジで落下防止、視点低下）。
- **右クリック**：土ブロックを設置。
- **マウス**：視点移動（上下90度制限）。
- **Esc**：一時停止メニュー（「続行」「メニューに戻る」）。

### メニュー

- Escで一時停止メニューを開き、ゲーム続行またはメイン画面に戻る。
- メイン画面で「終了」を選択するとゲーム終了。

## デバッグ

### コンソールログの確認

ブラウザの開発者ツール（F12 → Console）を開き、以下のログを確認：
- **初期化**：`BlockWorld script parsed successfully, Renderer initialized`
- **移動**：`Key pressed: KeyW, Move vector: (0, 0, 1)`
- **ジャンプ**：`Jump triggered, velocity.y: 0.45, Grounded: true`
- **スニーク**：`Sneak enabled, Edge detected, snapping to: ...`
- **ブロック設置**：`placeBlock called, Block placed at: ...`
- **チャンク**：`Chunk generated: 0,0, Showing loading notification`

### エラー対処

- **エラー例**：
  - `TypeError: Cannot read properties of undefined (reading 'domElement')`：
    - `index.html`が最新か確認、ブラウザキャッシュをクリア。
  - **WebGLエラー（#error表示）**：
    - `get.webgl.org`でWebGL対応を確認。
    - ブラウザ設定で「ハードウェアアクセラレーション」を有効化。
    - 最新ブラウザ（Chrome/Firefox）を使用。
  - **移動/ジャンプが動作しない**：
    - ログで`Key pressed`が出ない：キーボード入力がブロックされている可能性。
    - `Grounded: false`が続く：接地判定を確認、初期位置（y: 10）がブロックに埋まっていないか。
  - **パフォーマンスが低い**：
    - 影マップサイズを縮小（`index.html`の`directionalLight.shadow.mapSize`を512→256）。
    - 視距離を縮小（`viewDistance`を1→0.5）。

## 既知の問題

- **ブロック破壊**：ブロックを壊す機能は未実装（左クリックはポインターロックのみ）。
- **ブロック種類**：設置できるブロックは土のみ、選択機能なし。
- **インベントリ**：ブロック管理やアイテムシステムは未実装。
- **パフォーマンス**：低スペックデバイスでチャンク生成が遅延する可能性。
- **水の挙動**：水ブロックは視覚的のみ、泳ぎや流れのシミュレーションなし。

## 今後の予定

- ブロック破壊機能（左クリックでブロック除去）。
- インベントリシステム（ブロック種類の選択、アイテム管理）。
- ブロック選択UI（ホットバーやマウスホイールで切り替え）。
- 地形生成の改良（バイオーム、洞窟、鉱石）。
- パフォーマンス最適化（チャンク読み込みの高速化、LOD）。
- サウンド効果（足音、ブロック設置/破壊音）。

## ライセンス

このプロジェクトは教育目的および私用目的で自由に使用、改変できます。商用利用や再配布の際は、事前に許可を得てください。Three.jsはMITライセンスに基づいて使用されています（詳細は[Three.js GitHub](https://github.com/mrdoob/three.js/)を参照）。

**コントリビューション**：バグ報告や機能提案はGitHubのIssuesで歓迎します！連絡先：<ユーザー名>（GitHubプロフィールやIssues経由で連絡）。

BlockWorldで無限のブロックワールドを楽しみましょう！🚀
```

